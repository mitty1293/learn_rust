# Chapter04. 所有権を理解する
## 4.1. 所有権とは？
### 所有権規則
* Rustの各値は、所有者と呼ばれる変数と対応している。
* いかなる時も所有者は一つである。
* 所有者がスコープから外れたら、値は破棄される。
### 変数スコープ
* スコープ: 要素が有効になるプログラム内の範囲のこと
### String型
* 例として`String`型の所有権について考えていく。
* Rustでは文字列を表現するのに`文字列リテラル`と`String`型がある。
    * 文字列リテラル
        * 不変である（イミュータブル）
    * String
        * `mut`を用いて可変化できる（ミュータブル）
        * コンパイル時にサイズ不明なテキストも保持可能（ヒープにメモリを確保するため）
* `String`は可変化できるのにリテラルができないのは何故か？
    * 答えはメモリを扱う方法にある。
### メモリと確保
* 文字列リテラルの中身はコンパイル時に判明している。
    * よってテキストは最終的なバイナリにハードコードされる。
    * コンパイル時にサイズ不明、実行時に可変なテキスト用のメモリをバイナリに確保することは不可能
        * バイナリファイル内に一定のバイト数を持っておき、バイナリファイルを実際のメモリに展開した際、持っておいたバイト分メモリを確保することになるってことか？
* String型では、コンパイル時には不明瞭のメモリをヒープに確保する。
    * メモリは実行時にOSに要求される。
    * String型を使い終わったらOSにメモリを返還する。そしてその方法が必要になる。
* メモリを返還する方法
    * GCがある場合：GCが使用しないメモリを片付けるため人間が考慮する必要はない。
    * GCが無い場合：明示的に返還するコードを書く必要がある。
    * Rustの場合：GCは無い。メモリを所有している変数がスコープを抜けたら自動的に返還される。
        * 具体的には閉じ括弧`}`で、自動的に返還する関数`drop`が呼び出される。



## 参考資料
https://zenn.dev/toga/books/rust-atcoder/viewer/23-string